# :pushpin: 주니어 백엔드 개발자가 반드시 알아야 할 실무 지식 (최범균 저)


## :seedling: 1장. 들어가며

신입 개발자 A는 간단한 사이트를 만들면서 DB에 연결할 수 없다는 오류가 발생한다는 것을 알았다.

```text
// 개발자 A가 작성한 문제의 코드
Connection conn = ds.getConnection(); // 커넥션 풀에서 구함
try {
    
} catch (Exception e) {
  ... 에러 처리    
}

// conn.close()가 누락 -> 커넥션 풀에 반환하지 않음
```

- 일부 코드에서 사용이 끝난 DB 커넥션을 닫지 않은 것이 문제가 발생한 원인이었다.
- DB 커넥션을 사용한 뒤 풀에 반환하지 않았고 그로 인해 커넥션이 누수되었다. 
- 결국 풀에 있던 모든 커넥션이 소진되었고 이때부터 풀에서 새로운 커넥션을 가져올 수 없는 오류가 발생했다.

개발자 A는 커넥션 누수가 발생하는 버그를 모두 찾아 수정하고 개발 서버에 다시 배포했다. 
그런데 다음날 문제가 다시 발생했다. 
이번에는 커넥션의 최대 연결 시간 설정이 없는 것이 문제였다.

- DBMS 자체적으로 커넥션 유지 시간이 설정되어 있음
- 풀에 있는 커넥션의 연결 시간이 DBMS의 설정 시간을 초과하면서 발생한 것이 문제의 원인이였다.

